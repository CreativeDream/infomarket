<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE" ng-app="LoginApp">
  <head>

      <title>Login</title>
      
      <!--
      usually we login through projectile and keep the cookie,
      but for running standalone with a remote projectile, we can
      authenticate here 
       -->
      
      <!-- Metas -->
      <meta charset="UTF-8">
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="">

      <link rel="shortcut icon" href="favicon.ico"/>
      
      <!-- Stylesheets -->
      <!-- no RESET necessary with bookstrap 
      <link rel="stylesheet" type="text/css" href="./css/reset/reset.css">
       -->
      <link rel="stylesheet" type="text/css" href="./bower_components/bootstrap/docs/assets/css/bootstrap.css">
      <link rel="stylesheet" type="text/css" href="./css/plugins-styles/plugins-styles.css">
      <link rel="stylesheet" type="text/css" href="./css/custom.css">
      <link rel="stylesheet" type="text/css" href="./assets/fonts/bsmicons/bsmicons.css">
      
      <!-- Custom Font -->
      <link rel="stylesheet" type="text/css" href="./assets/fonts/open-sans-font.css">
      
      <!-- Scripts -->
      <script src="./bower_components/jquery/jquery.min.js" type="text/javascript"></script>
      <script src="./bower_components/angular/angular.js" type="text/javascript"></script>
      <!--
      debug 
      <script src="./bower_components/angular/angular.min.js" type="text/javascript"></script>
 			-->
      <script src="./bower_components/angular-route/angular-route.min.js" type="text/javascript"></script>
      <script src="./bower_components/angular-sanitize/angular-sanitize.min.js" type="text/javascript"></script>
      
      <script src="./js/scripts.js" type="text/javascript"></script>
      <script src="./js/app/app.js" type="text/javascript"></script>
      
      <script src="./js/scripts.js" type="text/javascript"></script>
      <script src="./js/app/app.js" type="text/javascript"></script>
      
      <!--[if IE]>
          <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      
      <script>
	      var app = angular.module('LoginApp', []);
	      app.controller('LoginController', function ($scope, $http){
	
	        $scope.doLogin = function() {
	        	
	        	var data = { 
	        			username: $scope.login, 
	        			password: $scope.password 
	        	};
	        	$http.post( 'http://localhost:8080/projectile/rest/token/0', data )
	        		.success(function(data, status, headers, config) {
	        			$http.defaults.headers.common['Authorization'] = 'Bearer ' + data;
	        	  })
	        	  .error(function(data, status, headers, config) {
	        		  console.log( "Error " + status );
	        	  });
	        };
	
	      });
	    </script>
      
  </head>
  
  <body ng-controller="LoginController">
  
  	<form ng-submit="doLogin()">

	  	<input ng-model="login" type="text" /><br>	  
  		<input ng-model="password" type="password" /><br>
  	
      <input type="submit" value="login">
      
    </form>	  
      
  </body>
  
</html>	  	
